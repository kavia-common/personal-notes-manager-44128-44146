{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data access layer for notes in a note-taking application. It supports localStorage-based persistence and an optional API backend, with functions to list, save, update, and delete notes, as well as to create new note objects.", "external_files": ["none (relies on environment variable and standard browser APIs)"], "external_methods": ["setTimeout", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "fetch", "encodeURIComponent", "crypto.randomUUID"], "published": ["getPersistenceMode", "createNotesRepository", "createNote"], "classes": [], "methods": [{"name": "delay(ms)", "description": "Returns a promise that resolves after a specified delay in milliseconds.", "scope": "", "scopeKind": ""}, {"name": "getPersistenceMode()", "description": "Determines whether to use API or local storage based on the environment variable REACT_APP_API_BASE.", "scope": "", "scopeKind": ""}, {"name": "Local.list", "description": "Reads notes from localStorage under the key 'notes.v1'."}, {"name": "Local.saveAll", "description": "Saves the entire notes array to localStorage."}, {"name": "Local.upsert", "description": "Adds or updates a note in local storage."}, {"name": "Local.remove", "description": "Removes a note by ID from local storage."}, {"name": "Api.base", "description": "Returns the API base URL after stripping trailing slashes."}, {"name": "Api.headers", "description": "Returns headers for API requests."}, {"name": "Api.handle", "description": "Processes fetch responses, handling errors and JSON conversion."}, {"name": "Api.list", "description": "Fetches the list of notes from the API."}, {"name": "Api.upsert", "description": "Sends a POST or PUT request to create or update a note via API."}, {"name": "Api.remove", "description": "Deletes a note via API."}, {"name": "createNotesRepository()", "description": "Creates a repository object with note methods, choosing API or local storage mode.", "scope": "", "scopeKind": ""}, {"name": "createNote({ title = '', content = '' } = {})", "description": "Creates a new note object with default properties and a unique ID.", "scope": "", "scopeKind": ""}, {"name": "base()", "scope": "Api", "scopeKind": "class", "description": "unavailable"}, {"name": "handle(res)", "scope": "Api", "scopeKind": "class", "description": "unavailable"}, {"name": "headers()", "scope": "Api", "scopeKind": "class", "description": "unavailable"}, {"name": "list()", "scope": "Local", "scopeKind": "class", "description": "unavailable"}, {"name": "remove(id)", "scope": "Local", "scopeKind": "class", "description": "unavailable"}, {"name": "saveAll(notes)", "scope": "Local", "scopeKind": "class", "description": "unavailable"}, {"name": "upsert(note)", "scope": "Local", "scopeKind": "class", "description": "unavailable"}], "calls": ["setTimeout", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "fetch", "encodeURIComponent", "crypto.randomUUID || Math.random"], "search-terms": ["notes data layer", "localStorage and API toggle", "createNote with default properties", "notes persistence", "API base URL"], "state": 2, "file_id": 14, "knowledge_revision": 29, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^const API_BASE = process.env.REACT_APP_API_BASE;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Api", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^const Api = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^const LS_KEY = 'notes.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Local", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^const Local = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  base() { return API_BASE?.replace(\\/\\\\\\/+$\\/, ''); },$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^export function createNote({ title = '', content = '' } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title = '', content = '' } = {})"}, {"_type": "tag", "name": "createNotesRepository", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^export function createNotesRepository() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^function delay(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}, {"_type": "tag", "name": "getPersistenceMode", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^export function getPersistenceMode() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handle", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async handle(res) {$/", "language": "JavaScript", "kind": "method", "signature": "(res)", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  headers() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Local", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async remove(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async remove(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "Local", "scopeKind": "class"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async saveAll(notes) {$/", "language": "JavaScript", "kind": "method", "signature": "(notes)", "scope": "Local", "scopeKind": "class"}, {"_type": "tag", "name": "upsert", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async upsert(note) {$/", "language": "JavaScript", "kind": "method", "signature": "(note)", "scope": "Api", "scopeKind": "class"}, {"_type": "tag", "name": "upsert", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44128-44146/notes_frontend/src/data/client.js", "pattern": "/^  async upsert(note) {$/", "language": "JavaScript", "kind": "method", "signature": "(note)", "scope": "Local", "scopeKind": "class"}], "hash": "2743587d5e158e404e74b8c8ff4adb10", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/data/client.js", "revision_history": [{"29": ""}]}